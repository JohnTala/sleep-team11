function n(t){return JSON.parse(localStorage.getItem(t))}function a(t,e){localStorage.setItem(t,JSON.stringify(e))}function c(t){const e=window.location.search;return new URLSearchParams(e).get(t)}function d(t){if(t.ok)return t.json();throw new Error("Bad Response")}class s{constructor(e){this.category=e,this.path=`../json/${this.category}.json`}getData(){return fetch(this.path).then(d).then(e=>e)}async findProductById(e){return(await this.getData()).find(r=>r.Id===e)}}class i{constructor(e,o){this.productId=e,this.product={},this.dataSource=o}async init(){this.product=await this.dataSource.findProductById(this.productId),this.renderProductDetails(),document.getElementById("addToCart").addEventListener("click",this.addProductToCart.bind(this))}addProductToCart(){const e=n("so-cart")||[];e.push(this.product),a("so-cart",e)}renderProductDetails(){u(this.product)}}function u(t){document.querySelector("h2").textContent=t.Brand.Name,document.querySelector("h3").textContent=t.NameWithoutBrand;const e=document.getElementById("productImage");e.src=t.Image,e.alt=t.NameWithoutBrand,document.getElementById("productPrice").textContent=t.FinalPrice,document.getElementById("productColor").textContent=t.Colors[0].ColorName,document.getElementById("productDesc").innerHTML=t.DescriptionHtmlSimple,document.getElementById("addToCart").dataset.id=t.Id}const l=new s("tents"),m=c("product"),h=new i(m,l);h.init();
